<!--
 *Copyright 2018 T Mobile, Inc. or its affiliates. All Rights Reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License"); You may not use
 * this file except in compliance with the License. A copy of the License is located at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * or in the "license" file accompanying this file. This file is distributed on
 * an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, express or
 * implied. See the License for the specific language governing permissions and
 * limitations under the License.
 -->

<div class="policy-knowledgebase-wrapper flex flex-between flex-col">
    <div class="flex flex-col">
        <app-breadcrumb *ngIf='currentPageLevel === 1'></app-breadcrumb>
        <div class="floating-widgets-header pk-header flex flex-between">
            <div>
                <app-back-navigation></app-back-navigation>
            </div>
        </div>
    </div>
    <div class="type-count-container">
        <div class="type-count-wrapper flex flex-row">
            <div class="type-count-content-container" *ngFor="let tab of tabName">
                <div class="type-count-content-wrapper flex flex-col">
                    <div class="type-name capitalize">{{tab}}</div>
                    <div class="type-count">{{ typeObj[tab] }}</div>
                </div>
            </div>
        </div>
    </div>
    <div class='policy-knowledgebase-content-wrapper'>
        <div class="policy-knowledgebase-content">
            <div [class.loader]="knowledgebaseData.length==0 && errorMessage==''"></div>
            <app-error-message *ngIf="errorMessage" [selectedValue]="errorMessage"></app-error-message>
            <app-table (rowSelectEventEmitter)="goToDetails($event)" *ngIf="knowledgebaseData.length>0 && errorMessage==''" 
                [data]="knowledgebaseData" [columnWidths]="columnWidths"
                [columnsSortFunctionMap]="columnsSortFunctionMap" (headerColNameSelected)="handleHeaderColNameSelection($event)" 
                [headerColName]="headerColName" [direction]="direction" (searchCalledEventEmitter)="callNewSearch($event)" [searchQuery]="searchPassed"
                [showSearchBar]="showSearchBar" [showAddRemoveCol]="showAddRemoveCol" (whitelistColumnsChanged)="handleWhitelistColumnsChange($event)"
                (searchInColumnsChanged)="handleSearchInColumnsChange($event)" [whiteListColumns]="whiteListColumns" (downloadClicked)="handlePopClick()">
            </app-table>
        </div>
    </div>
</div>
